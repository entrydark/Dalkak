var t=function(t){this.name=t||this.randomize()};t.randomize=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n="",o=0;o<5;o++)n+=t.charAt(Math.floor(Math.random()*t.length));return n};var n=function(){for(var t,n=[],o=arguments.length;o--;)n[o]=arguments[o];this.poses=n||[],this.dimension=this.poses.length,this.x=(t=this.poses)[0],this.y=t[1],this.z=t[2],this.w=t[3]};n.prototype.rotate=function(t){return void 0===t&&(t=0),t=t*Math.PI/180,new n(this.x*Math.cos(t)-this.y*Math.sin(t),this.x*Math.sin(t)+this.y*Math.cos(t))},n.prototype.round=function(t){return void 0===t&&(t=0),new(Function.prototype.bind.apply(n,[null].concat(this.poses.map(function(n){return Math.round(n*Math.pow(10,t))/Math.pow(10,t)}))))};var o=function(t){this.name=t||Name.randomize(),this.blockGroups=[]};o.prototype.link=function(t){return this.blockGroups.push(t),this},o.prototype.fire=function(t){for(var n in this.blockGroups)this.blockGroups[n].start(t);return this};var i=function(t,n,o){this.name=t||Name.randomize(),this.template=n||"",this.params=this.genParams(/<<(?<boolean>.+?)>>|\(\((?<string>.+?)\)\)|{{(?<block>.+?)}}/g),this.func=o||new Function};i.prototype.genParams=function(t){var n={};return(this.template.match(t)||[]).forEach(function(o){t.lastIndex=0;var i=t.exec(o).groups;i.boolean?n[i.boolean]=new Param("boolean",i.boolean):i.string?n[i.string]=new Param("string",i.string):i.block&&(n[i.block]=new Param("block",i.block))}),n};var r=function(t,n){this.parent=t||new BlockInfo,this.setParams(n||[])};r.prototype.setParams=function(t){return this.params=Object.assign(this.parent.params,t),this},r.from=function(t){return new r(t)};var e=function(t,n){this.event=t||new Event,this.blocks=n||[]};e.prototype.ready=function(){return this.event.link(this),this},e.prototype.start=function(t){for(var n in this.blocks)this.blocks[n].func();return this},e.prototype.attach=function(t){return new e(this.event,this.blocks.concat(t.blocks))},e.from=function(t){return new e(void 0,[t])};var s=function(t,n,o){this.name=t||Name.randomize(),this.pos=n||new Vector,this.blocks=o||[]};s.prototype.addBlock=function(t){return this.blocks.push(t),this},s.prototype.ready=function(){this.blocks.forEach(function(t){return t.ready()})};var a=function(t){function n(n,o,i,r){t.call(this,n,o,i),this.children=r||[]}return t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n,n.prototype.addThing=function(t){return this.children.push(t),this},n.prototype.ready=function(){this.children.forEach(function(t){return t.ready()})},n}(s),h=function(t,n,o){this.name=t||Name.randomize(),this.things=n||new ThingGroup("Global"),this.blockSets=o||[]};h.prototype.addThing=function(t){return this.things.addThing(t),this},h.prototype.ready=function(){this.things.ready()};export default{Name:t,Vector:n,Param:function(t,n){this.type=t,this.name=n||Name.randomize(),this.value="boolean"==this.type&&new Boolean||"string"==this.type&&new String||"block"==this.type&&new Block},Event:o,BlockInfo:i,BlockSet:function(t,n,o){this.infos=n||[],this.events=o||[]},Block:r,BlockGroup:e,Thing:s,ThingGroup:a,Project:h};

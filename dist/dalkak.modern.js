var t=function(){function t(n){this.name=n||t.randomize()}return t.randomize=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n="",r=0;r<5;r++)n+=t.charAt(Math.floor(Math.random()*t.length));return n},t}();function n(t){return(n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function r(t,n){return(r=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function o(t,n,e){return(o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,n,o){var e=[null];e.push.apply(e,n);var i=new(Function.bind.apply(t,e));return o&&r(i,o.prototype),i}).apply(null,arguments)}function e(t){var i="function"==typeof Map?new Map:void 0;return(e=function(t){if(null===t||-1===Function.toString.call(t).indexOf("[native code]"))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==i){if(i.has(t))return i.get(t);i.set(t,e)}function e(){return o(t,arguments,n(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r(e,t)})(t)}function i(t,n){i=function(t,n){return new s(t,n)};var o=e(RegExp),u=RegExp.prototype,c=new WeakMap;function s(t,n){var r=o.call(this,t);return c.set(r,n),r}function a(t,n){var r=c.get(n);return Object.keys(r).reduce(function(n,o){return n[o]=t[r[o]],n},Object.create(null))}return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&r(t,n)}(s,o),s.prototype.exec=function(t){var n=u.exec.call(this,t);return n&&(n.groups=a(n,this)),n},s.prototype[Symbol.replace]=function(t,n){if("string"==typeof n){var r=c.get(this);return u[Symbol.replace].call(this,t,n.replace(/\$<([^>]+)>/g,function(t,n){return"$"+r[n]}))}if("function"==typeof n){var o=this;return u[Symbol.replace].call(this,t,function(){var t=[];return t.push.apply(t,arguments),"object"!=typeof t[t.length-1]&&t.push(a(t,o)),n.apply(this,t)})}return u[Symbol.replace].call(this,t,n)},i.apply(this,arguments)}var u=function(){function t(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this.poses=n||[],this.dimension=this.poses.length}var n=t.prototype;return n.rotate=function(n){return void 0===n&&(n=0),n=n*Math.PI/180,new t(this.poses[0]*Math.cos(n)-this.poses[1]*Math.sin(n),this.poses[0]*Math.sin(n)+this.poses[1]*Math.cos(n))},n.round=function(n){return void 0===n&&(n=0),o(t,this.poses.map(function(t){return Math.round(t*Math.pow(10,n))/Math.pow(10,n)}))},t}(),c=function(){function n(n,r){this.name=n||t.randomize(),this.blockGroups=[]}var r=n.prototype;return r.link=function(t){return this.blockGroups.push(t),this},r.fire=function(t){for(var n in this.blockGroups)this.blockGroups[n].start(t);return this},n}(),s=function(){function t(t,n){this.parent=t||new a,this.setParams(n||[])}var n=t.prototype;return n.setParams=function(t){return this.params=Object.assign(this.parent.params,t),this},n.run=function(t){this.parent.func(this.params)},t.fromBlockInfo=function(n){return new t(n)},t}(),a=function(){function n(n,r,o,e){this.name=n||t.randomize(),this.template=r||"";var u=i(/<<(.+?)>>|\(\((.+?)\)\)|{{(.+?)}}/g,{boolean:1,string:2,block:3});this.params=this.genParams(u),this.func=o||new Function}return n.prototype.genParams=function(t){var n={};return(this.template.match(t)||[]).forEach(function(r){t.lastIndex=0;var o=t.exec(r).groups;o.boolean?n[o.boolean]=!1:o.string?n[o.string]="":o.block&&(n[o.block]=new s)}),n},n}(),f=function(){function t(t,n){this.event=t||new c,this.blocks=n||[]}var n=t.prototype;return n.ready=function(){return this.event.link(this),this},n.start=function(t){for(var n in this.blocks)this.blocks[n].run(t);return this},n.attach=function(n){return new t(this.event,this.blocks.concat(n.blocks))},t.fromBlock=function(n,r){return new t(r,[n])},t.fromBlockInfo=function(n,r){return t.fromBlock(s.fromBlockInfo(n),r)},t}(),p=function(){function n(n,r,o){this.name=n||t.randomize(),this.pos=r||new u,this.blocks=o||[]}var r=n.prototype;return r.addBlock=function(t){return this.blocks.push(t),this},r.ready=function(){return this.blocks.forEach(function(t){return t.ready()}),this},n.fromBlock=function(t,r){return new n(void 0,void 0,[f.fromBlock(t,r)])},n.fromBlockInfo=function(t,r){return n.fromBlock(s.fromBlockInfo(t),r)},n}(),h=function(t){var n,r;function o(n,r,o,e){var i;return(i=t.call(this,n,r,o)||this).children=e||[],i}r=t,(n=o).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r;var e=o.prototype;return e.addThing=function(t){return this.children.push(t),this},e.ready=function(){return this.children.forEach(function(t){return t.ready()}),this},o}(p),l=function(){function n(n,r,o){this.name=n||t.randomize(),this.things=r||new h("Global"),this.blockSets=o||[]}var r=n.prototype;return r.addThing=function(t){return this.things.addThing(t),this},r.ready=function(){return this.things.ready(),this},n}(),y={Name:t,Vector:u,Event:c,BlockInfo:a,BlockSet:function(t,n,r){this.infos=n||[],this.events=r||[]},Block:s,BlockGroup:f,Thing:p,ThingGroup:h,Project:l};export default y;
